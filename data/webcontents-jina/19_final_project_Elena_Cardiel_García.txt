Title: Final project. Final version

URL Source: http://fabacademy.org/2019/labs/leon/students/elena-cardiel/FP_final.html

Markdown Content:
![Image 1](https://fabacademy.org/2019/labs/leon/students/elena-cardiel/images/finalproject/final/final_img01.jpg)

_Lux_ is an interactive piece of furniture which is able to recognize the ambient light level and the presence of the user. It can be used to personalize the light of small-medium spaces, illuminating just the part of the room/table that is being used without disturbing the rest of the people in that same room/table, improving the quality of the ambient and saving energy. It has been designed as a kit of components and pieces that you can assemble, so the packaging is fundamental in this project. The idea is to distribute it in order to learn and teach about design, digital fabrication, and electronics.  
During the development, I used cutting, additive, and subtractive processes as well as electronic design and production. One of the main goals was to have a design as integrated as possible so most of the electronics, devices, and wiring are "hidden" in the base of the lamp. For this prototype, the lamp is divided into three different sections which work in the same way but independently.

 ![Image 2](https://fabacademy.org/2019/labs/leon/students/elena-cardiel/presentation.png)If you want to watch the full session please go to: [Fab-20190612B\_Final01](https://vimeo.com/341887088) from [Academany](https://vimeo.com/academany) on [Vimeo](https://vimeo.com/).

_This page is just the result of a lot of work done for several months. Please visit [Project development](http://fabacademy.org/2019/labs/leon/students/elena-cardiel/finalproject.html) to know all the steps that I have followed while developing this project._

### Fabrication processes

The design of the lamp has been developed in Rhinoceros 3D. The final prototype of the lamp has a size of Ø225x204(h) mm.

#### Laser cutting - Horizontal structure

The horizontal structure is made by laser cutting in MDF of 3mm. I decided to use this material because is strong and easy to cut and glue.  
The bottom of the base is made up of two layers, the first one is just the bottom and in the second one I included and cut the footprint of the vertical structure, the main PCB and the supports that I have created to hold the different devices (sensors, motors, relay, batteries...) so everything is organized and in place.  
Moving up, we have the vertical covers of the base of the lamp. This "walls" are designed applying the _living hinges_ technique, that allows you to bend the wood and created curved walls using the laser cutter. They are attached to the base through four points and they have a cut for the "eyes" of the distance sensor. These last pieces don't need to be glued to the base, they work by press-fit.

![Image 3](https://fabacademy.org/2019/labs/leon/students/elena-cardiel/images/finalproject/final/final_img03.jpg)Then we have the horizontal covers of the base. These pieces are made up of three layers of MDF, one for the cover and two more for the lower rail (where the exterior foldable layer goes). It also has a hole that fits on the head of the servo. That makes possible to have access to the servo from outside of the base.  
And finally we have the top part of the lamp, that is made up of three layers of MDF. In this case, we have one layer for the top which has a central circular hole to place the phototransistor so it can read the ambient light level; the second layer adds one layer for the top rail and has another central hole for housing the phototransistor PCB, and then the third layer is only for adding more hight to the rail.

![Image 4](https://fabacademy.org/2019/labs/leon/students/elena-cardiel/images/finalproject/final/final_img02.jpg)All outlines, all pieces that need to be laser cut, fit in a board of 810x450mm. (the maximum of a Universal Laser System machine, model VLS6.60). It takes 40 minutes with the following settings: _cutting > 100% power / 11% speed / 500 ppi ; engraving > 60% power / 100% speed / 1000 ppi_.

![Image 5](https://fabacademy.org/2019/labs/leon/students/elena-cardiel/images/finalproject/final/final_img04.jpg)

#### 3D Printing - Vertical structure + support pieces + exterior foldable layer

The vertical structure and the support pieces are made by 3D Printing in PLA 1,75mm. I decided to use this technique due to the irregular shapes that I needed for the different pieces.

The height of the vertical structure (and the height of the lamp) was limited by the maximum zeta that the 3D Printer that I used, a BQ Witbox 2, can support: 198mm. In the bottom part, I made a hole to have the possibility to cross wires from one side to another if it was needed and I added a tab to support the horizontal cover of the base. In one of the vertical elements, I added a "pipe" to hide the wires for the serial bus networking which go from the main PCB in the base of the lamp to the phototransistor PCB in the top. For the rest of the pieces, I designed them according to the size and shape of each device. I also made a linear hole in the vertical pieces and the crosses (the ones which go attached to the servo and moves the exterior foldable layer) to fit the linen. The exterior foldable layer was also made by 3D Printing on textiles. This part was developed during the [wildcard week](http://fabacademy.org/2019/labs/leon/students/elena-cardiel/week19.html).

![Image 6](https://fabacademy.org/2019/labs/leon/students/elena-cardiel/images/finalproject/final/final_img09.jpg)In total it took around 9 hours to print everything, with the following main settings: _layer height: 0,3 mm. / wall thickness: 1,2 mm. / top&bottom thickness: 0,9mm. / infill density: 12% / speed: 60mm/s._.

### Electronics design and production

I designed, milled and soldered my own PCBs for this project, two in total. The main PCB is placed in the base of the lamp. It controls with an Atmega328 the 3 servo motors and 3 distance sensors (one couple for each section of the lamp), the relay, and the networking to receive the data from the phototransistor's PCB. The system is powered up with a 9V battery.

![Image 7](https://fabacademy.org/2019/labs/leon/students/elena-cardiel/images/finalproject/final/final_img05.jpg)The phototransistor's PCB is placed in the top of the lamp. It is controlled through an Attiny44. On the face of the plate that goes inwards, we have all the components and connections, while on the outside face we have the phototransistor. This is the only visible electronic component of the whole lamp since the rest is hidden and integrated with the design.

![Image 8](https://fabacademy.org/2019/labs/leon/students/elena-cardiel/images/finalproject/final/final_img06.jpg)Please find below the completed BOM for these two PCBs:

<table><tbody><tr><td><h3><b>Main PCB</b></h3></td><td>Where to buy?</td><td>Amount</td><td>Price</td><td>Total price</td></tr><tr><td><a href="https://www.digikey.es/product-detail/es/bantam-tools/MT1004/1932-1038-ND/8567212">Proto Board FR1</a></td><td>Digikey</td><td>1/4 board</td><td>1,24 €/unit</td><td>0,31 €</td></tr><tr><td><a href="https://www.digikey.es/product-detail/es/microchip-technology/ATMEGA328P-AU/ATMEGA328P-AU-ND/1832260">Atmega328P</a></td><td>Digikey</td><td>1</td><td>1,85 €/unit</td><td>1,05 €</td></tr><tr><td><a href="https://www.digikey.es/product-detail/es/yageo/RC1206FR-0710KL/311-10.0KFRCT-ND/731430">10kΩ resistor</a></td><td>Digikey</td><td>1</td><td>0,09 €/unit</td><td>0,09 €</td></tr><tr><td><a href="https://www.digikey.es/product-detail/es/yageo/RC1206FR-07499RL/311-499FRCT-ND/731891">499Ω resistor</a></td><td>Digikey</td><td>1</td><td>0,09 €/unit</td><td>0,09 €</td></tr><tr><td><a href="https://www.digikey.es/product-detail/es/kemet/C1206C104KARACTU/399-4674-1-ND/992199">0,1uF capacitor 250V</a></td><td>Digikey</td><td>2</td><td>0,39 €/unit</td><td>0,78 €</td></tr><tr><td><a href="https://www.digikey.es/product-detail/es/samsung-electro-mechanics/CL31B106KLHNNNE/1276-3103-1-ND/3891189">10uF capacitor 35V</a></td><td>Digikey</td><td>1</td><td>0,75 €/unit</td><td>0,75 €</td></tr><tr><td><a href="https://www.digikey.es/product-detail/es/samsung-electro-mechanics/CL31F105ZBFNNNE/1276-1204-1-ND/3889290">1uF capacitor&nbsp;50V</a></td><td>Digikey</td><td>1</td><td>0,18 €/unit</td><td>0,18 €</td></tr><tr><td><a href="https://www.digikey.es/product-detail/es/omron-electronics-inc-emc-div/B3SN-3112P/SW262CT-ND/60835">Switch</a></td><td>Digikey</td><td>1</td><td>0,95 €/unit</td><td>0,95 €</td></tr><tr><td><a href="https://www.digikey.es/product-detail/es/abracon-llc/AWSCR-8.00CV-T/535-10004-1-ND/2001627">Xtal 8MHz</a></td><td>Digikey</td><td>1</td><td>0,35 €/unit</td><td>0,35 €</td></tr><tr><td><a href="https://www.digikey.es/product-detail/es/lite-on-inc/LTST-C150TBKT/160-1643-1-ND/573584">LED</a></td><td>Digikey</td><td>1</td><td>0,35 €/unit</td><td>0,35 €</td></tr><tr><td><a href="https://www.digikey.es/product-detail/es/diodes-incorporated/ZLDO1117G50TA/ZLDO1117G50DICT-ND/2095613">Regulator 5V 1A ZLDO1117</a></td><td>Digikey</td><td>1</td><td>0,45 €/unit</td><td>0,45 €</td></tr><tr><td><a href="https://www.amazon.es/gp/product/B07DX83KYP/ref=ppx_yo_dt_b_asin_title_o00_s00?ie=UTF8&amp;psc=1">Pin header</a></td><td>Amazon</td><td>41</td><td>0,01 €/unit</td><td>0,41 €</td></tr><tr><td></td><td></td><td></td><td><b>Total cost Main PCB</b></td><td><b>6,59 €</b></td></tr></tbody></table>

<table><tbody><tr><td><h3><b>Photransistor PCB</b></h3></td><td>Where to buy?</td><td>Amount</td><td>Price</td><td>Total price</td></tr><tr><td><a href="https://www.digikey.es/product-detail/es/bantam-tools/MT1004/1932-1038-ND/8567212">Proto Board FR1</a></td><td>Digikey</td><td>1/4 board</td><td>1,24 €/unit</td><td>0,31 €</td></tr><tr><td><a href="https://www.digikey.es/product-detail/es/microchip-technology/ATTINY44A-SSUR/ATTINY44A-SSURCT-ND/3441005">ATtiny44&nbsp;</a></td><td>Digikey</td><td>1</td><td>0,71 €/unit</td><td>0,71 €</td></tr><tr><td><a href="https://www.digikey.es/product-detail/es/yageo/RC1206FR-0710KL/311-10.0KFRCT-ND/731430">10kΩ resistor</a></td><td>Digikey</td><td>2</td><td>0,09 €/unit</td><td>0,18 €</td></tr><tr><td><a href="https://www.digikey.es/product-detail/es/samsung-electro-mechanics/CL31F105ZBFNNNE/1276-1204-1-ND/3889290">1uF capacitor&nbsp;50V</a></td><td>Digikey</td><td>1</td><td>0,18 €/unit</td><td>0,18 €</td></tr><tr><td><a href="https://www.digikey.es/product-detail/es/everlight-electronics-co-ltd/PT15-21C-TR8/1080-1380-1-ND/2676114">IR phototransistor&nbsp;</a></td><td>Digikey</td><td>1</td><td>0,37 €/unit</td><td>0,37 €</td></tr><tr><td><a href="https://www.amazon.es/gp/product/B07DX83KYP/ref=ppx_yo_dt_b_asin_title_o00_s00?ie=UTF8&amp;psc=1">Pin header</a></td><td>Amazon</td><td>16</td><td>0,01 €/unit</td><td>0,17 €</td></tr><tr><td></td><td></td><td></td><td><b>Total cost Phototransistor PCB</b></td><td><b>1,92 €</b></td></tr></tbody></table>

### Embedded microcontroller interfacing and programming

I programmed both PCBs through the Arduino IDE. The lamp works with two integrated systems: first of all, we have the lines of code that let us know the ambient light level, using a phototransistor, and send that information to the main PCB that turns on/off the relay, and this one the LED bulb, according to that information. Secondly, we have the code that controls the distance sensor, which will read if someone is in front of the lamp, and the servo motor, that will open or close the exterior foldable layer according to the sensor distance data.  
In the code for the phototransistor, I filter the data of the ambient light level so networking communication is more stable. In the part of the code that controls the motors and sensors, I used a couple of libraries which makes the code much easier to edit and understand: [VarSpeedServo.h](https://github.com/netlabtoolkit/VarSpeedServo) and [SharpIR.h](https://github.com/guillaume-rico/SharpIR)

### System integration and packaging

As I already have said, one of the main goals was to have a design as integrated as possible. In order to do that, most of the devices and wiring are placed in the base of the lamp and the rest of then are hidden or integrated with the design.

![Image 9](https://fabacademy.org/2019/labs/leon/students/elena-cardiel/images/finalproject/final/final_img08.jpg)Apart from that, _Lux_ is more than just a smart piece of furniture, _Lux_ is a kit of components and pieces that can be developed, modified and assembled in order to learn and teach about design, digital fabrication and electronic. Due to that, I also created a cardboard box, with two plastic trays inside, to save everything and distribute it in those places where, for some reason, people don't have access to the necessary resources to fabricate it.  
The packaging was developed during the [wildcard week](http://fabacademy.org/2019/labs/leon/students/elena-cardiel/week19.html).

![Image 10](https://fabacademy.org/2019/labs/leon/students/elena-cardiel/images/finalproject/final/final_img07.jpg)

### BOM

Please find below the completed list of devices and materials that I used to make _Lux_. For those components that I bought online, you will find the link clicking on the resource's name.

<table><tbody><tr><td><h3><b>Lamp</b></h3></td><td>Where to buy?</td><td>Amount</td><td>Price</td><td>Total price</td></tr><tr><td>MDF 3mm. (laser cutting)</td><td>Locally</td><td>1 (810x450mm.)</td><td>2,45 €/unit</td><td>2,45 €</td></tr><tr><td><a href="https://www.amazon.es/BQ-Easy-Filamento-resistente-endurecimiento/dp/B078GMM4T6/ref=sr_1_25?__mk_es_ES=%C3%85M%C3%85%C5%BD%C3%95%C3%91&amp;keywords=pla%2Bbq&amp;qid=1560809435&amp;s=beauty&amp;sr=8-25&amp;th=1">PLA 1,75mm. filament (3D Printing)</a></td><td>Amazon</td><td>215 gr.</td><td>14,45 €/kg.</td><td>3,11 €</td></tr><tr><td><a href="https://www.amazon.es/gp/product/B074C387M1/ref=ppx_yo_dt_b_asin_title_o02_s00?ie=UTF8&amp;psc=1">LED bulb</a></td><td>Amazon</td><td>1</td><td>6,05 €/unit</td><td>6,05 €</td></tr><tr><td><a href="https://www.amazon.es/gp/product/B003UOWDCG/ref=ppx_yo_dt_b_asin_title_o03_s00?ie=UTF8&amp;psc=1">Battery 12V x2</a></td><td>Amazon</td><td>1</td><td>2,14 €/pair</td><td>2,14 €</td></tr><tr><td><a href="https://www.amazon.es/Duracell-Plus-Power-Pilas-alkaline/dp/B004W7GYGQ/ref=sr_1_7?__mk_es_ES=%C3%85M%C3%85%C5%BD%C3%95%C3%91&amp;keywords=pila+9v&amp;qid=1560810125&amp;s=gateway&amp;sr=8-7">Battery 9V</a></td><td>Amazon</td><td>1</td><td>2,90 €/unit</td><td>2,90 €</td></tr><tr><td><a href="https://www.amazon.es/gp/product/B01HXK60MQ/ref=ppx_yo_dt_b_asin_title_o04_s00?ie=UTF8&amp;psc=1">Battery clip</a></td><td>Amazon</td><td>1</td><td>1,50 €/unit</td><td>1,50 €</td></tr><tr><td><a href="https://www.amazon.es/gp/product/B074MTPBNB/ref=ppx_yo_dt_b_asin_title_o05_s00?ie=UTF8&amp;psc=1">Sharp GP2Y0A02YK0F ID distance sensor</a></td><td>Amazon</td><td>3</td><td>14,97 €/unit</td><td>44,91 €</td></tr><tr><td><a href="https://www.amazon.es/gp/product/B07236N7Z2/ref=ppx_yo_dt_b_asin_title_o07_s00?ie=UTF8&amp;psc=1">Servo motor MG996R</a></td><td>Amazon</td><td>3</td><td>3,98 €/unit</td><td>11,94 €</td></tr><tr><td><a href="https://www.amazon.es/gp/product/B07BVXT1ZK/ref=ppx_yo_dt_b_asin_title_o02_s00?ie=UTF8&amp;psc=1">Relay module 5V</a></td><td>Amazon</td><td>1</td><td>1,80 €/unit</td><td>1,80 €</td></tr><tr><td>Linen</td><td>Locally</td><td>0,18 m2</td><td>3,95 €/m2</td><td>0,71 €</td></tr><tr><td>Bulb cap</td><td>Locally</td><td>1</td><td>0,75 €/unit</td><td>0,75 €</td></tr><tr><td>Main PCB</td><td>Digikey</td><td>1</td><td>6,59 €/unit</td><td>6,59 €</td></tr><tr><td>Phototransistor PCB</td><td>Digikey</td><td>1</td><td>1,92 €/unit</td><td>1,92 €</td></tr><tr><td>Others (wood glue, tape, soldering tin, DuPont cables…)</td><td>-</td><td>-</td><td>-</td><td>1,50 €</td></tr><tr><td></td><td></td><td></td><td><b>Total cost/lamp</b></td><td><b>89,77 €</b></td></tr></tbody></table>

<table><tbody><tr><td><h3><b>Packaging</b></h3></td><td>Where to buy?</td><td>Amount</td><td>Price</td><td>Total price</td></tr><tr><td>Fir planked wood board 30mm. (CNC milling mold)</td><td>Locally</td><td>0,25 m2</td><td>29,73 €/m2</td><td>7,43 €</td></tr><tr><td>PVC sheet 0,5mm. (Vacuum thermoforming)</td><td>Locally</td><td>1</td><td>3,50 €/unit</td><td>3,50 €</td></tr><tr><td>Corrugated cardwoard 3mm.</td><td>Locally</td><td>1 (1000x700mm.)</td><td>3,60 €/unit</td><td>3,60 €</td></tr><tr><td></td><td></td><td></td><td><b>Total cost/packaging (first time)</b></td><td><b>14,53 €</b></td></tr></tbody></table>

_Please note that for the packaging you only need to fabricate the mold once. After that, you can make as many copies as you want._

### Files

Please feel free to download the files and make your own _LUX_. Remember to share your prototype with the rest of the community!!  
[LUX\_TheSmartLamp\_ElenaCardiel](https://fabacademy.org/2019/labs/leon/students/elena-cardiel/images/finalproject/final/LUX_TheSmartLamp_ElenaCardiel.zip)

[![Image 11: Creative Commons License](https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png)](http://creativecommons.org/licenses/by-nc-sa/4.0/)  
This work is licensed under a [Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License](http://creativecommons.org/licenses/by-nc-sa/4.0/)

![Image 12](https://fabacademy.org/2019/labs/leon/students/elena-cardiel/images/bannerb.png)
