<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>MCO Fab Academy 2018</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="all,follow">
    <!-- Bootstrap CSS-->
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <!-- Font Awesome and Pixeden Icon Stroke icon fonts-->
    <link rel="stylesheet" href="css/font-awesome.min.css">
    <link rel="stylesheet" href="css/pe-icon-7-stroke.css">
    <!-- Google fonts - Roboto-->
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:300,400,700">
    <!-- lightbox-->
    <link rel="stylesheet" href="css/lightbox.min.css">
    <!-- theme stylesheet-->
    <link rel="stylesheet" href="css/style.default.css" id="theme-stylesheet">
    <!-- Custom stylesheet - for your changes-->
    <link rel="stylesheet" href="css/custom.css">
    <!-- Favicon-->
    <!--<link rel="shortcut icon" href="favicon.png">-->
    <!-- Tweaks for older IEs--><!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script><![endif]-->
  </head>
  <body>
    <!-- navbar-->
    <header class="header">
      <div role="navigation" class="navbar navbar-default navbar-fixed-top">
        <div class="container">
          <div class="navbar-header"><img class="pull-left navbar-brand" src="img/fabacademyslogo.png"><a href="index.html" class="navbar-brand">Marta Cortés Orduña</a><span class="navbar-brand"> <a target="_blank" href="http://www.oulu.fi/fablab/">(@FabLab Oulu)</a></span>
            <div class="navbar-buttons">
              <button type="button" data-toggle="collapse" data-target=".navbar-collapse" class="navbar-toggle navbar-btn">Menu<i class="fa fa-align-justify"></i></button>
            </div>
          </div>
          <div id="navigation" class="collapse navbar-collapse navbar-right">
            <ul class="nav navbar-nav">
              <li><a href="index.html">Assignments</a></li>
              <li><a href="final_project.html">Final Project</a></li>

              <li><a href="aboutme.html">About me</a></li>
              <li class="dropdown"><a href="#" data-toggle="dropdown" class="dropdown-toggle">Jump to... <b class="caret"></b></a>
                <ul class="dropdown-menu scroll-menu">
                  <li><a href="assignment01.html">1. Principles and Practices</a></li>
                  <li><a href="assignment02.html">2. Project management</a></li>
                  <li><a href="assignment03.html">3. Computer-aided design</a></li>
                  <li><a href="assignment04.html">4. Computer-controlled cutting</a></li>
                  <li><a href="assignment05.html">5. Electronics production</a></li>
                  <li><a href="assignment06.html">6. 3D scanning and printing</a></li>
                  <li><a href="assignment07.html">7. Electronics design</a></li>
                  <li><a href="assignment08.html">8. Computer-controlled machining</a></li>
                  <li><a href="assignment09.html">9. Embedded programming</a></li>
                  <li><a href="assignment10.html">10. Molding and casting</a></li>
                  <li><a href="assignment11.html">11. Input devices</a></li>
                  <li><a href="assignment12.html">12. Output devices</a></li>
                  <li><a href="assignment13.html">13. Interface and application programming</a></li>
                  <li><a href="assignment14.html">14. Networking and communications</a></li>
                  <li><a href="assignment15.html">15. Mechanical design</a></li>
                  <li><a href="assignment16.html">16. Machine design</a></li>
                  <li><a href="assignment17.html">17. Wildcard week</a></li>                  
                  <li><a href="assignment18.html">18. Applications and Implications</a></li>
                  <li><a href="assignment19.html">19. Invention, intellectual property and income</a></li>
                  <li><a href="assignment20.html">20. Project Development</a></li>
                  <li class="divider"></li>
                  <li><a href="final.html#ideas">Final project idea</a></li>
                </ul>
              </li>
            </ul>
            <!--<a href="#" data-toggle="modal" data-target="#login-modal" class="btn navbar-btn btn-ghost"><i class="fa fa-sign-in"></i>Log in</a>-->
          </div>
        </div>
      </div>
    </header>

    <section class="background-gray-lightest section_p_bottom">
      <div class="container">
        <div class="breadcrumbs">
          <ul class="breadcrumb">
            <li><a href="index.html">Assignments</a></li>
            <li>Week 16</li>
          </ul>
        </div>
        <h1 class="heading">16. Machine design</h1>
        <p class="lead">This week we needed to finalize the machine we started in <a href="assignment15.html"> last assignment.</a>: The <a href="http://fab.academany.org/2018/labs/fablaboulu/machine_week_group2.html">Fab Peeler</a> (former Apple Peeler)</p>

<!--Page Navigation bar-->
      <nav class="navbar  navbar-inverse">
        <div class="container-fluid">
          <!-- Brand and toggle get grouped for better mobile display -->
          <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
          </div>

          <!-- Collect the nav links, forms, and other content for toggling -->
          <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav">
              <li><a href="#tasks">ToDo</a></li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">The "Doing"<span class="caret"></span></a>
                <ul class="dropdown-menu">
                  <li><a href="#thedoing1" >the doing 1</a></li>
                  <li><a href="#thedoing2">the doing 2</a></li>
                  <!--<li><a href="#project">Defining the project</a></li>-->
                </ul>
              </li>
              <li><a href="#resources">Resources</a></li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Once Done<span class="caret"></span></a>
                <ul class="dropdown-menu">
                  <li><a href="#summary">Summary</a></li>
                  <li><a href="#difficulties">Difficulties</a></li>
                  <li><a href="#learnings">Main learnings</a></li>
                  <li><a href="#tips">Tips</a></li>
                  <li><a href="#files">Files</a></li>
                </ul>
              </li>
            </ul>
          </div><!-- /.navbar-collapse -->
        </div><!-- /.container-fluid -->
      </nav>
<!--/.Page Navigation bar-->
      </div>

    </section>

    <!--<figure class="full-image"><img src="img/jumbotron1.jpg" alt="">
      <figcaption>Caption of the Image </figcaption>
    </figure>-->
 
    <section class="blog-post background-gray-lightest section_p_top">
      <div class="container">
        <div class="row">
          <div class="col-sm-11">
            <div class="post-content">
              <p>This week I am programming the motors. We have decided to go with Gestalt. From <a href="http://pygestalt.org/VMC_IEM.pdf"> Ilan Ellison Moyer´s Master's thesis</a> "Gestalt is an accessible and flexible control framework which aims to augment the ability of individuals to create new automated tools, and to thus self-extend their abilities to create objects which would be too tedious or impossible to create by hand." A good place that helps to get started is <a href="http://fabacademy.org/archives/2015/doc/MachineMakingNotes.html">this tutorial </a> from fabacademy</p>


              

              <h2 id="tasks">To Do</h2>
              <ol>
                <li>Prepare the environment for using Gestalt nodes</li>
                <li>First test</li>
                <li>Do the programming and testing</li>
              </ol>

              <h2>The "Doing"</h2>
              <h3  id="thedoing1">Programming environment</h3>
              <section class="section_assign">
                Gestalt framework is python based. Specifically, python 2.7 is needed. Actually, the list of things to be done is:
                <ul>
                  <li>pyhotn 2.7. Download from <a href="https://www.python.org/downloads/release/python-2715/">here</a></li>
                  <li>pyserial</li>
                  <a href="img/assignment16/installPySerial.png" title="" data-lightbox="portfolio" data-title="design"> <img src="img/assignment16/installPySerial.png" alt="" class="img-responsive img-border"></a><div class="caption"></div>
                  <li>Clone gestalt from <a href="https://github.com/nadya/pygestalt">here</a></li>
                  <li>install pygestalt by running <code class="black">python setup.py install</code></li>
                  <a href="img/assignment16/installGestalt.png" title="" data-lightbox="portfolio" data-title="design"> <img src="img/assignment16/installGestalt.png" alt="" class="img-responsive img-border"></a><div class="caption"></div>
                </ul>
                
              </section>
              <h3  id="thedoing2">Preparing and testing</h3>
              <section class="section_assign">
                <p>Physical layer is called <a href="http://mtm.cba.mit.edu/fabinabox/dev/fabnet/overview.html"> Fabnet</a>, "a multi-drop network, meaning that multiple modules (a.k.a. nodes) share a single set of communication wires. Signalling is differential based on the RS-485 specification." It is implemented with an RS485 bus. A bridge between it and fabnet is needed. Luckily, there was already a board prepared from last year. So I prepared the setting to test first just one motor: 
                <a href="img/assignment16/IMG_20180511_161025.jpg" title="" data-lightbox="portfolio" data-title="design"> <img src="img/assignment16/IMG_20180511_161025.jpg" alt="" class="img-responsive img-border"></a><div class="caption"></div>
                12 V is needed from the ´power source and I adjust the Ilimit to 0.600mA

                <a href="img/assignment16/IMG_20180514_092423.jpg" title="" data-lightbox="portfolio" data-title="design"> <img src="img/assignment16/IMG_20180514_092423.jpg" alt="" class="img-responsive img-border"></a><div class="caption"></div>


                And prepared to run the <code class="black">single_node.py</code> example. I just had to change the <code class="black">portName</code> at the <code class="black">def initInterfaces(self)</code> of the <code class="black">virtualmachine</code> with my COM port number which was COM13 most of the times<br/>
                </p>
                <p>     
                At first it was not working. I checked, double checked, triple checked I had downloaded all the code needed and that I had the pins correctly connected. Nothing.  I was almost sure it should be a connection, but not idea where. I could not get the blue led tinkle. I was very frustrated because it everything seemed to be very straightforward, but I got stuck in this point.   Finally, another eyes (<a href="">Jari</a>)  spotted the incorrect connection. And it worked as expected: blue led started tinkling, I pressed the buttonon the node to set it as the axis and it moved!
                <div class="row">
                  <div class="col-md-6"><a href="img/assignment16/single_node_example.png" title="" data-lightbox="portfolio" data-title="design"> <img src="img/assignment16/single_node_example.png" alt="" class="img-responsive img-border"></a><div class="caption"></div></div>
                
<div class="col-md-6"><a href="img/assignment16/IMG_20180514_092836.jpg" title="" data-lightbox="portfolio" data-title="design"> <img src="img/assignment16/IMG_20180514_092836.jpg" alt="" class="img-responsive img-border"></a><div class="caption"></div></div>
                </div>
                

                </p>
              </section>
              <h3  id="thedoing2">Programming the motors</h3>
              <section class="section_assign">
                Once I was able to move one motor, I went on to test the two motors. For that, I connected the two motors we had already prepared from last week:
<a href="img/assignment16/IMG_20180514_163758.jpg" title="" data-lightbox="portfolio" data-title="design"> <img src="img/assignment16/IMG_20180514_163758.jpg" alt="" class="img-responsive img-border"></a><div class="caption"></div>

                 ... and started testing the <code class="black">xy_plotter.py</code> example. 
                <a href="img/assignment16/xx_plotter_example.png" title="" data-lightbox="portfolio" data-title="design"> <img src="img/assignment16/xx_plotter_example.png" alt="" class="img-responsive img-border"></a><div class="caption"></div>
                I then started to modify that code. I started looking to the output screen, trying to understand what was going on. Then, I set different points, first trying to adjust the horizontal movement to the actual length we needed. Then, I set different speeds for each node, testing them to see what worked better. Finally, setting the same slow velocity to both nodes (finally 2), was working better.

                <br/>
                <br/>
                First demo with motors<br/>


              <iframe src="https://player.vimeo.com/video/269864333" width="320" height="180" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
<p><a href="https://vimeo.com/269864333">Fruit Peeler Team</a> from <a href="https://vimeo.com/macordu">Marta</a> on <a href="https://vimeo.com">Vimeo</a>.</p>
                
              </section>
              
              <h2 id="resources">Resources</h2>
              <section class="section_assign">
                <ul>
                  <li>Gestalt nodes and <a href="https://github.com/imoyer/gestalt">software</a> </li>
                  <li><a href="http://fabacademy.org/archives/2015/doc/MachineMakingNotes.html">this tutorial </a> from fabacademy</li>
                  <li>Corresponding assignment from <a href="http://archive.fabacademy.org/archives/2017/fablaboulu/students/55/assignment_11.html">Yrjö</a> </li>
                </ul>
              </section>

              <h2>Once done</h2>
              <h3  id="summary">Summary</h3>
              <section class="section_assign">
                <ul>
                  <li>I have programmed the gestalt nodes</li>
                  <li>I have done documentation on the page and organized the layout</li>
                  <li>I have participated in testing different solutions for the blades</li>
                  <li>I have participated in testing different solutions for holding the fruit</li>
                  
                </ul>
              </section>
              <h3  id="difficulties">Difficulties</h3>
              <section class="section_assign">
                <ul>
                  <li>Main difficulty was a small but time consuming one: find the wrong cable when the gestalt motors were not working at first</li>
                </ul>
              </section>

              <h3  id="files">Files</h3>
              <section class="section_assign">
                                <ul>
                <li><a href="files/assignment16/apple_peeler.py">python code for the machine </a> adapted from example xy_plotter.py</li>
              </ul>
              </section>

          <!--    <blockquote>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus magna. Cras in mi at felis aliquet congue. Ut a est eget ligula molestie gravida. Curabitur massa. Donec eleifend, libero at sagittis mollis, tellus est malesuada tellus, at luctus turpis elit sit amet quam. Vivamus pretium ornare est.</p>
              </blockquote>
              <h3>Header Level 3</h3>
              <p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est. Mauris placerat eleifend leo. Quisque sit amet est et sapien ullamcorper pharetra. Vestibulum erat wisi, condimentum sed, commodo vitae, ornare sit amet, wisi. Aenean fermentum, elit eget tincidunt condimentum, eros ipsum rutrum orci, sagittis tempus lacus enim ac dui. Donec non enim in turpis pulvinar facilisis. Ut felis. Praesent dapibus, neque id cursus faucibus, tortor neque egestas augue, eu vulputate magna eros eu erat. Aliquam erat volutpat. Nam dui mi, tincidunt quis, accumsan porttitor, facilisis luctus, metus</p>
              <ul>
                <li>Lorem ipsum dolor sit amet, consectetuer adipiscing elit.</li>
                <li>Aliquam tincidunt mauris eu risus.</li>
              </ul>
              <p><img src="img/blog1.jpg" alt="Example blog post alt" class="img-responsive"></p>
              <p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est. Mauris placerat eleifend leo. Quisque sit amet est et sapien ullamcorper pharetra. Vestibulum erat wisi, condimentum sed, commodo vitae, ornare sit amet, wisi. Aenean fermentum, elit eget tincidunt condimentum, eros ipsum rutrum orci, sagittis tempus lacus enim ac dui. Donec non enim in turpis pulvinar facilisis. Ut felis. Praesent dapibus, neque id cursus faucibus, tortor neque egestas augue, eu vulputate magna eros eu erat. Aliquam erat volutpat. Nam dui mi, tincidunt quis, accumsan porttitor, facilisis luctus, metus</p>-->
            
            </div>
            <!-- /.post-content-->


          </div>
        </div>
      </div>
    </section>
    <footer class="footer">

      <div class="footer__copyright">
        <div class="container">
          <div class="row">
            <div class="col-md-6">
              <!--<p>&copy;2018 Marta Cortés Orduña</p>-->
              <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>
            </div>
            <div class="col-md-6">
              <p class="credit">Code <a href="https://bootstrapious.com/e-commerce-templates" class="external">Bootstrapious</a></p>
              <!-- Please do not remove the backlink to us unless you support us at https://bootstrapious.com/donate. It is part of the license conditions. Thank you for understanding :)-->
            </div>
          </div>
        </div>
      </div>
    </footer>
    <a id="back-to-top" href="#" class="back-to-top" role="button" title="" data-toggle="tooltip" data-placement="left" data-original-title="Click to return on the top page" style="display: none;"><i class="fa fa-arrow-circle-o-up fa-4x" aria-hidden="true"></i></a>
    <!-- anchor class="btn btn-primary btn-lg "-->
    <!-- Javascript files-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/jquery.cookie.js"> </script>
    <script src="js/lightbox.min.js"></script>
    <script src="js/front.js"></script>
    <script src="js/custom.js"></script>
        <script type="text/javascript">
     $(function() {
  $('a[href*=#]:not([href=#])').click(function() {
    if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'') 
&& location.hostname == this.hostname) {

      var target = $(this.hash);
      target = target.length ? target : $('[name=' + this.hash.slice(1) +']');
      if (target.length) {
        $('html,body').animate({
          scrollTop: target.offset().top - 75 //offsets for fixed header
        }, 1000);
        return false;
      }
    }
  });
  //Executed on page load with URL containing an anchor tag.
  if($(location.href.split("#")[1])) {
      var target = $('#'+location.href.split("#")[1]);
      if (target.length) {
        $('html,body').animate({
          scrollTop: target.offset().top - 75 //offset height of header here too.
        }, 1000);
        return false;
      }
    }
});
</script>

  </body>
</html>